<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dizi Oynatıcı</title>
    <link href="https://vjs.zencdn.net/8.10.0/video-js.css" rel="stylesheet">
    <style>
        body {
            background: #121212;
            color: white;
            font-family: Arial, sans-serif;
        }
        .loading-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background: rgba(0,0,0,0.9);
            z-index: 1000;
        }
        .series-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            padding: 20px;
        }
        .series-card {
            background: #1e1e1e;
            border-radius: 8px;
            overflow: hidden;
        }
        .series-poster {
            width: 100%;
            height: 280px;
            object-fit: cover;
        }
    </style>
</head>
<body>
    <div class="loading-container" id="loadingScreen">
        <div class="loading-text">Diziler yükleniyor...</div>
    </div>

    <div class="series-grid" id="seriesGrid"></div>

    <script src="https://vjs.zencdn.net/8.10.0/video.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const loadingScreen = document.getElementById('loadingScreen');
            const seriesGrid = document.getElementById('seriesGrid');
            
            // M3U dosyasını yükle
            fetch('https://raw.githubusercontent.com/ademolalookman/ademola/refs/heads/main/dizifun.m3u')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Dosya bulunamadı');
                    }
                    return response.text();
                })
                .then(data => {
                    // Başarılı yükleme
                    parseM3U(data);
                    loadingScreen.style.display = 'none';
                })
                .catch(error => {
                    // Hata durumunda
                    console.error('Hata:', error);
                    loadingScreen.innerHTML = `
                        <div style="text-align:center;">
                            <p>Diziler yüklenirken hata oluştu</p>
                            <p>${error.message}</p>
                            <button onclick="window.location.reload()" style="padding:10px 20px;margin-top:10px;">
                                Tekrar Dene
                            </button>
                        </div>
                    `;
                });

            function parseM3U(data) {
                const lines = data.split('\n');
                let currentItem = {};
                
                for (let i = 0; i < lines.length; i++) {
                    const line = lines[i].trim();
                    
                    if (line.startsWith('#EXTINF:')) {
                        currentItem = {};
                        const info = line.substring(8).split(',');
                        currentItem.name = info[1];
                        
                        // URL'yi al (bir sonraki satır)
                        currentItem.url = lines[++i].trim();
                        
                        // Diziyi ekrana ekle
                        addSeriesToGrid(currentItem);
                    }
                }
            }

            function addSeriesToGrid(series) {
                const card = document.createElement('div');
                card.className = 'series-card';
                card.innerHTML = `
                    <img src="${series.tvg_logo || 'https://via.placeholder.com/200x280?text=No+Image'}" 
                         class="series-poster" 
                         alt="${series.name}"
                         onerror="this.src='https://via.placeholder.com/200x280?text=No+Image'">
                    <div style="padding:10px;">
                        <h3>${series.name}</h3>
                    </div>
                `;
                seriesGrid.appendChild(card);
            }
        });
    </script>
</body>
</html>